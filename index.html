<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Budget Battle</n></code><code>
  <style>
    html, body { margin:0; padding:0; height:100%; width:100%; }
    body { font-family:sans-serif; padding:1rem; max-width:480px; margin:0 auto; display:flex; flex-direction:column; }
    h1,h2 { text-align:center; margin:0.5rem 0; font-size:1.5rem; }
    p { font-size:1rem; line-height:1.4; }
    button { width:100%; padding:1rem; font-size:1.1rem; margin:0.5rem 0; border:none; border-radius:8px; background:#76c7c0; color:#fff; }
    button:active { background:#5aa8a0; }
    input[type=number], select { width:100%; padding:0.8rem; font-size:1.1rem; margin-bottom:0.5rem; border:1px solid #ccc; border-radius:6px; }
    .slider-group { margin:1rem 0; }
    .slider-group label { display:block; font-size:1rem; margin-bottom:0.3rem; }
    input[type=range] { -webkit-appearance:none; width:100%; height:2.5rem; background:transparent; margin:0; }
    input[type=range]::-webkit-slider-thumb { -webkit-appearance:none; width:2rem; height:2rem; border-radius:50%; background:#76c7c0; border:none; margin-top:-0.75rem; }
    input[type=range]::-webkit-slider-runnable-track { height:0.5rem; background:#ddd; border-radius:0.25rem; }
    .hidden { display:none; }
    #timerBar { width:100%; height:0.75rem; background:#eee; border-radius:0.4rem; overflow:hidden; margin:0.5rem 0; }
    #progress { height:100%; width:100%; background:#76c7c0; transform-origin:left; transition:transform 1s linear; }
    .decision-buttons { display:flex; flex-direction:column; gap:0.5rem; }
    #eventGif { max-width:100%; border-radius:8px; margin:1rem auto; display:block; }
    #tipOverlay { position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.8); color:#fff; padding:0.8rem 1rem; border-radius:8px; font-size:1rem; display:none; max-width:90%; }
    #confetti-canvas { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:100; }
  </style>
</head>
<body>

  <audio id="lockSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
  <audio id="winSound"  src="https://actions.google.com/sounds/v1/crowds/cheer.ogg"></audio>
  <canvas id="confetti-canvas"></canvas>
  <div id="tipOverlay">üí° Tip: Automate your savings transfer to pay yourself first!</div>

  <!-- 1. Start -->
  <div id="screen-start">
    <h1>üèÜ Budget Battle</h1>
    <p>Welcome! In 20 minutes you‚Äôll learn to own your budget like a boss.<br>
       Enter your monthly income or pick a scenario:</p>
    <div style="display:flex; gap:0.5rem; margin-bottom:1rem;">
      <label style="flex:1;"><input type="radio" name="incomeMode" value="custom" checked> My Income</label>
      <label style="flex:1;"><input type="radio" name="incomeMode" value="scenario"> Scenario</label>
    </div>
    <div id="customInput"><input type="number" id="incomeInput" placeholder="e.g. 3500"></div>
    <div id="scenarioInput" class="hidden">
      <select id="scenarioSelect">
        <option value="3000">Alex: $3,000</option>
        <option value="4500">Taylor: $4,500</option>
        <option value="2500">Jordan: $2,500</option>
      </select>
    </div>
    <button id="startBtn">Start</button>
  </div>

  <!-- 2. Initial Allocation -->
  <div id="screen-alloc" class="hidden">
    <h2>Initial Budget</n></code><code>
    <p><strong>Income:</strong> $<span id="allocIncome"></span></p>
    <div class="slider-group">
      <label>Needs (<span id="initNeedsPct">50</span>%): <span id="initNeedsAmt"></span></label>
      <input type="range" id="initNeeds" min="0" max="100" value="50">
    </div>
    <div class="slider-group">
      <label>Wants (<span id="initWantsPct">30</span>%): <span id="initWantsAmt"></span></label>
      <input type="range" id="initWants" min="0" max="100" value="30">
    </div>
    <div class="slider-group">
      <label>Savings (<span id="initSavePct">20</span>%): <span id="initSaveAmt"></span></label>
      <input type="range" id="initSave" min="0" max="100" value="20">
    </div>
    <button id="allocLockBtn">Lock In Budget</button>
  </div>

  <!-- 3. Seven Steps -->
  <div id="screen-step" class="hidden">
    <h2 id="stepTitle"></h2>
    <img id="eventGif" class="hidden" alt="Event animation">
    <p id="stepDesc"></p>
    <div class="decision-buttons">
      <button id="keepBtn">Keep Budget</button>
      <button id="adjustBtn">Adjust Budget</button>
    </div>
    <div id="budgetForm" class="hidden">
      <p><strong>Income:</strong> $<span id="showIncome"></span></p>
      <div class="slider-group">
        <label>Needs (<span id="needsPct">50</span>%): <span id="needsAmt"></span></label>
        <input type="range" id="needs" min="0" max("100) value="50">
      </div>
      <div class="slider-group">
        <label>Wants (<span id("wantsPct">30</span>%): <span id="<code>wantsAmt"></span></label>
      <input type=range id="wants" min="0" max="100" value="30">
      </div>
      <div class="slider-group">
        <label>Savings (<span id("savePct">20</span>%): <span id="saveAmt"></span></label>
        <input type("range" id="save" min="0" max="100" value="20">
      </div>
      <div id="timerBar"><div id("progress"></div></div>
      <button id="lockBtn">Lock Allocation</button>
    </div>
  </div>

  <!-- 4. Summary -->
  <div id("screen-summary" class="hidden">
    <h2>üéâ Battle Summary</h2>
    <p id="summaryText"></p>
    <p id("finalScore"></p>
    <button id("restart">Play Again</button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/canvas))

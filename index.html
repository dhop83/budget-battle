<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>Budget Battle</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 2rem auto; padding: 0 1rem; }
    h1 { text-align: center; }
    .hidden { display: none; }
    .slider-group { margin: 1rem 0; }
    label { display: block; margin-bottom: 0.3rem; }
    input[type=range] { width: 100%; }
    button { padding: 0.6rem 1.2rem; font-size: 1rem; }
    #result { margin-top: 1.5rem; font-weight: bold; }
  </style>
</head>
<body>
  <h1>🏆 Budget Battle</h1>
  <div id="step1">
    <label for="scenario">Choose your scenario:</label>
    <select id="scenario">
      <option value="3000,1000,300">Alex: $3,000/mo, rent $1,000, loans $300</option>
      <option value="4500,1800,500">Taylor: $4,500/mo, rent $1,800, savings goal $500</option>
      <option value="2500,800,200">Jordan: $2,500/mo, rent $800, debt $200</option>
    </select>
    <button id="start">Start Budget</button>
  </div>

  <div id="step2" class="hidden">
    <p><strong>Your Income: </strong><span id="income"></span></p>
    <div class="slider-group">
      <label>Needs (<span id="needsPct">50</span>%): <span id="needsAmt"></span></label>
      <input type="range" id="needs" min="30" max="70" value="50">
    </div>
    <div class="slider-group">
      <label>Wants (<span id="wantsPct">30</span>%): <span id="wantsAmt"></span></label>
      <input type="range" id="wants" min="10" max="50" value="30">
    </div>
    <div class="slider-group">
      <label>Savings/Debt (<span id="savePct">20</span>%): <span id="saveAmt"></span></label>
      <input type="range" id="save" min="10" max="40" value="20">
    </div>
    <button id="submitBudget">Submit Budget</button>
  </div>

  <div id="result" class="hidden"></div>

  <script>
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const result = document.getElementById('result');
    let income, rent, fixed;

    document.getElementById('start').onclick = () => {
      [income, rent, fixed] = document.getElementById('scenario').value.split(',').map(Number);
      document.getElementById('income').textContent = `$${income}`;
      updateAmounts();
      step1.classList.add('hidden');
      step2.classList.remove('hidden');
      result.classList.add('hidden');
    };

    ['needs','wants','save'].forEach(id => {
      document.getElementById(id).oninput = updateAmounts;
    });

    function updateAmounts() {
      const needsPct = +document.getElementById('needs').value;
      const wantsPct = +document.getElementById('wants').value;
      const savePct  = 100 - needsPct - wantsPct;
      document.getElementById('save').value = savePct;
      document.getElementById('needsPct').textContent = needsPct;
      document.getElementById('wantsPct').textContent = wantsPct;
      document.getElementById('savePct').textContent  = savePct;
      document.getElementById('needsAmt').textContent = `$${Math.round(income * needsPct/100)}`;
      document.getElementById('wantsAmt').textContent= `$${Math.round(income * wantsPct/100)}`;
      document.getElementById('saveAmt').textContent = `$${Math.round(income * savePct/100)}`;
    }

    document.getElementById('submitBudget').onclick = () => {
      const events = [
        { text: '🏎 Unexpected car repair: -$400 from Needs', delta: -400 },
        { text: '🎉 Work bonus! +$300 to Savings', delta: +300 },
        { text: '📱 Phone upgrade: -$200 from Wants', delta: -200 },
      ];
      const e = events[Math.floor(Math.random()*events.length)];
      let newSave = Math.round(income * (+document.getElementById('savePct').textContent)/100) + e.delta;
      result.innerHTML = `<p>${e.text}</p>
        <p>Your adjusted Savings bucket: <strong>$${newSave}</strong></p>`;
      result.classList.remove('hidden');
    };
  </script>
</body>
</html>

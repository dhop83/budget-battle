<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Budget Boss ‚Äì By Use Money Well LLC</title>
  <style>
    html, body { margin:0; padding:0; width:100%; height:100%; }
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    h1, h2 { text-align:center; margin:0.5rem 0; }
    p.lead { font-size:1.1rem; color:#444; text-align:center; line-height:1.4; margin-bottom:2rem; }

    .container {
      max-width:800px;
      margin:0 auto;
      padding:2rem 1rem;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      min-height:80vh;
    }

    .mode-container {
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(240px,1fr));
      gap:2rem;
      width:100%;
      margin-bottom:1.5rem;
    }
    .mode-container label {
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      cursor:pointer;
    }
    .mode-container input {
      transform:scale(1.2);
      margin-bottom:0.3rem;
    }
    .mode-desc {
      font-size:0.9rem;
      color:#666;
    }

    select, input[type="number"] {
      width:100%;
      max-width:260px;
      padding:0.5rem;
      font-size:1rem;
      margin-bottom:1rem;
    }
    button {
      width:100%;
      max-width:300px;
      font-size:1.2rem;
      padding:0.8rem;
      border:none;
      border-radius:8px;
      background:#76c7c0;
      color:#fff;
      cursor:pointer;
    }
    button:active {
      background:#5aa8a0;
    }

    .slider-group { margin:1rem 0; }
    .slider-group label { display:block; margin-bottom:0.3rem; }
    input[type=range] {
      -webkit-appearance:none;
      width:100%; height:2rem; background:transparent;
    }
    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance:none;
      width:1.5rem; height:1.5rem; border-radius:50%;
      background:#76c7c0; margin-top:-0.3rem;
    }
    input[type=range]::-webkit-slider-runnable-track {
      height:0.3rem; background:#ddd; border-radius:0.2rem;
    }

    #timerBar { width:100%; height:0.5rem; background:#eee; border-radius:0.3rem; overflow:hidden; margin:0.5rem 0; }
    #progress { height:100%; background:#76c7c0; transform-origin:left; transition:transform 1s linear; }

    .decision-buttons { display:flex; flex-direction:column; gap:0.5rem; }
    #eventGif { max-width:100%; height:auto; margin:1rem auto; display:block; }
    #summaryText, #goalText { text-align:center; margin:0.5rem 0; }
    #finalScore { text-align:center; font-weight:bold; }
    footer { text-align:center; margin-top:auto; padding:1rem 0; font-size:0.8rem; color:#666; }

    #opt-invest[disabled] { color:#999; }
    #unlockNotice { margin-top:-0.5rem; margin-bottom:1rem; color:#a00; font-size:0.9rem; }
    .hidden { display:none; }
  </style>
</head>
<body>
  <!-- Audio & Confetti Canvas -->
  <audio id="lockSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
  <audio id="winSound"  src="https://actions.google.com/sounds/v1/crowds/cheer.ogg"></audio>
  <canvas id="confetti-canvas"></canvas>

  <!-- START SCREEN -->
  <div id="screen-start" class="container">
    <h1>üèÜ Budget Boss ‚Äì By Use Money Well LLC</h1>
    <p class="lead">
      Ready to boss your budget?<br>
      Allocate across Needs, Wants, Savings & Debt‚Äîthen tackle fun scenario challenges to hit your goal!
    </p>

    <div class="mode-container">
      <label>
        <input type="radio" name="incomeMode" value="custom" checked>
        My Income
        <span class="mode-desc">Enter your own monthly income for a custom game.</span>
      </label>
      <label>
        <input type="radio" name="incomeMode" value="scenario">
        Scenario
        <span class="mode-desc">Choose a preset challenge with a clear goal.</span>
      </label>
    </div>

    <div id="customInput">
      <input type="number" id="incomeInput" placeholder="Enter monthly income">
    </div>
    <div id="scenarioInput" class="hidden">
      <select id="scenarioSelect">
        <option value="3000" data-type="savings" data-goal="600">Start Saving</option>
        <option value="4500" data-type="debt"    data-goal="500">Minimize Debt</option>
        <option value="2500" data-type="invest"  data-goal="400" id="opt-invest" disabled>Start Investing</option>
      </select>
      <p id="unlockNotice" class="hidden">
        üîí Unlock Investing by beating both Savings & Debt!
      </p>
    </div>

    <button id="startBtn">Get Started</button>
  </div>

  <!-- INITIAL ALLOCATION -->
  <div id="screen-alloc" class="hidden container">
    <h2>Initial Budget</h2>
    <p id="goalText"></p>
    <p><strong>Income:</strong> $<span id="allocIncome"></span></p>

    <div class="slider-group">
      <label>Needs (<span id="initNeedsPct">0</span>%): <span id="initNeedsAmt"></span></label>
      <input type="range" id="initNeeds" min="0" max="100" value="50">
    </div>
    <div class="slider-group">
      <label>Wants (<span id="initWantsPct">0</span>%): <span id="initWantsAmt"></span></label>
      <input type="range" id="initWants" min="0" max="100" value="30">
    </div>
    <div class="slider-group">
      <label>Savings (<span id="initSavePct">0</span>%): <span id="initSaveAmt"></span></label>
      <input type="range" id="initSave" min="0" max="100" value="20">
    </div>
    <div class="slider-group">
      <label>Debt (<span id="initDebtPct">0</span>%): <span id="initDebtAmt"></span></label>
      <input type="range" id="initDebt" min="0" max="100" value="0">
    </div>

    <button id="allocLockBtn">Lock It In</button>
  </div>

  <!-- SCENARIO STEPS -->
  <div id="screen-step" class="hidden container">
    <h2 id="stepTitle"></h2>
    <img id="eventGif" class="hidden" alt="Event">
    <p id="stepDesc"></p>
    <div class="decision-buttons">
      <button id="keepBtn">Keep Allocation</button>
      <button id="adjustBtn">Rebalance</button>
    </div>
    <div id="budgetForm" class="hidden">
      <p><strong>Income:</strong> $<span id="showIncome"></span></p>

      <div class="slider-group">
        <label>Needs (<span id="needsPct">0</span>%): <span id="needsAmt"></span></label>
        <input type="range" id="needs" min="0" max="100" value="0">
      </div>
      <div class="slider-group">
        <label>Wants (<span id="wantsPct">0</span>%): <span id="wantsAmt"></span></label>
        <input type="range" id="wants" min="0" max="100" value="0">
      </div>
      <div class="slider-group">
        <label>Savings (<span id="savePct">0</span>%): <span id="saveAmt"></span></label>
        <input type="range" id="save" min="0" max="100" value="0">
      </div>
      <div class="slider-group">
        <label>Debt (<span id="debtPct">0</span>%): <span id="debtAmt"></span></label>
        <input type="range" id="debt" min="0" max="100" value="0">
      </div>

      <div id="timerBar"><div id="progress"></div></div>
      <button id="lockBtn">Lock Allocation</button>
    </div>
  </div>

  <!-- SUMMARY -->
  <div id="screen-summary" class="hidden container">
    <h2>üéâ Battle Summary</h2>
    <p id="summaryText"></p>
    <p id="finalScore"></p>
    <button id="restart">Play Again</button>
  </div>

  <footer>¬© 2025 Use Money Well LLC. All Rights Reserved</footer>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <script>
  (function(){
    const scenarioSteps = {
      savings: [ /* ‚Ä¶same as before‚Ä¶*/ ],
      debt:    [ /* ‚Ä¶same as before‚Ä¶*/ ],
      invest:  [ /* ‚Ä¶same as before‚Ä¶*/ ]
    };

    let income, scenarioType='savings', scenarioGoal=0, steps=[];
    let allocations=[], netDelta=0, currentStep=0, timer;
    const byId=id=>document.getElementById(id);

    function checkUnlock(){
      const saved=localStorage.getItem('bb_savingsAchieved')==='true';
      const debtd=localStorage.getItem('bb_debtAchieved')==='true';
      const investOpt=byId('opt-invest'), notice=byId('unlockNotice');
      if(saved&&debtd){
        investOpt.disabled=false;
        investOpt.textContent="Start Investing";
        notice.classList.add('hidden');
      } else {
        investOpt.disabled=true;
        notice.classList.remove('hidden');
      }
    }
    checkUnlock();

    document.getElementsByName('incomeMode').forEach(r=>{
      r.onchange=()=>{
        if(r.value==='custom'){
          byId('customInput').classList.remove('hidden');
          byId('scenarioInput').classList.add('hidden');
        } else {
          byId('scenarioInput').classList.remove('hidden');
          byId('customInput').classList.add('hidden');
        }
      };
    });

    // Rebalance helpers & update functions (same as prior code)‚Ä¶

    // Start button
    byId('startBtn').onclick=()=>{
      if(document.querySelector('input[name="incomeMode"]:checked').value==='custom'){
        income=+byId('incomeInput').value;
        scenarioType='savings';
        scenarioGoal=Math.round(income*0.2);
      } else {
        const opt=byId('scenarioSelect').selectedOptions[0];
        income=+opt.value;
        scenarioType=opt.dataset.type;
        scenarioGoal=+opt.dataset.goal;
      }
      if(!income) return alert('Enter a valid income.');
      steps=scenarioSteps[scenarioType];
      byId('screen-start').classList.add('hidden');
      byId('screen-alloc').classList.remove('hidden');
      byId('allocIncome').textContent=income;
      byId('goalText').textContent=
        scenarioType==='debt' ? `Goal: Minimize $${scenarioGoal} debt` :
        scenarioType==='invest'? `Goal: Invest $${scenarioGoal}` :
                                `Goal: Save $${scenarioGoal}`;
      updateInitBudget();
      allocations=[{
        n:+byId('initNeeds').value,
        w:+byId('initWants').value,
        s:+byId('initSave').value,
        d:+byId('initDebt').value
      }];
      currentStep=1; netDelta=0;
    };

    // ‚Ä¶rest of your logic unmodified‚Ä¶

  })();
  </script>
</body>
</html>
